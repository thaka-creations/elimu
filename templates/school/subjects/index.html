{% extends "partials/theme.html" %}
{% load static%}
{% block title %}
<title>Tafa</title>
{% endblock %}

{% block styles %}
<link rel="stylesheet" href="{% static 'css/subject.css' %}">
<style>
    .col-label-required:after{
        content:"*";
        color:red;
    }
    .badge{
        top:2px;
        right:2px; 
        font-size:0.7em; 
        background-color:#5968B0;
    }
</style>
{% endblock %}

{% block content %}

<div class="mt-4 mb-5 heading-bar px-md-3 d-flex py-2">
    <div class="flex-fill"><p class="fs-4 mb-0">{{form.name.title}} {{subject.name.title}} Videos Category</p></div>
    <div class="flex-fill d-flex justify-content-end"><button type="button" class="btn btn-primary btn-sm px-3 shadow-none" onclick="history.back()">Back</button></div>
</div>

<div class="card rounded-0">
    <div class="card-header rounded-0 d-flex justify-content-between">
        <p class="fs-5 mb-0">{{form.name.title}} {{subject.name.title}} Topics</p>
        <button class="btn border-1 shadow-sm btn-success rounded-0" id="btn-subject-subscribe">Subscribe</button>
    </div>
    <div class="card-body">
        <div class="container">
            <div class="row gx-3 gy-3">
                {% if topics %}
                    {% for topic in topics %}
                        <div class="col-md-3">
                            <div class="py-2 border text-center un-it position-relative" un-id="{{topic.id}}">
                                {{topic.name.title}} <span class="badge text-danger text-white position-absolute">Ksh {{topic.topic_amounts.first.amount}}</span>
                            </div>
                        </div>
                    {% endfor %}
                {% else %}
                    <div class="col-12 text-center">
                        No {{subject.name.title}} topics available at the moment
                    </div>
                {% endif %}

            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block scripts %}
<script>
    var elements = document.getElementsByClassName("col-md-3");
    Array.from(elements).forEach(function(element){
        element.addEventListener("click", function(e){
            id = e.target.getAttribute("un-id");
            slug = "{{form.name.lower}}".replace(" ","-");
            subject = "{{subject.name.lower}}".replace(" ","-");
            window.location.href = "/"+slug+"/"+subject+"/topic/"+id;
        });
    })
</script>
{% endblock %}